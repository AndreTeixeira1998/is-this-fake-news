<!DOCTYPE html>
<html lang="en-us">
<head>
    <title>Home</title>
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">

    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <!-- Latest compiled JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <script src="../static/js/predict.js" type="text/javascript"></script>

	<link rel="stylesheet" type="text/css" href="../static/css/style.css">
</head>
<body>
	<header>
		<div class="container">
            <div id="brandname">
                <h1 style="font-family: 'Courier New', monospace; color: white;">Fake News Detector</h1>
            </div>
        </div>
    </header>
    <br/>
    <div class="container">
        <span style="color: black; padding-top: 30px;">Powered by machine-learning and black magic!</span>
    </div>
	<div class="container" style="padding-top: 30px;">
        <form action="{{url_for('predict')}}" method="POST">
        
        <label>
            <textarea placeholder="Article Title" name="title" id="article-title" rows="1" cols="100" required></textarea>
        </label>
        <br/>
            <label>
                <textarea placeholder="Article Text" name="text" id="article-text" rows="10" cols="100" required></textarea>
            </label>
            <div id="container">
                <button type="button" class="predict-button" value="predict" id="predict-button-id">Predict</button>
            </div>â€‹
            <div id="container">
                <div class="loader" id="loader-id" style="display: none;"></div>
            </div>
        
        
    </form>
    </div>
    
    <div class="container">
        <h2 id="result-banner"></h2>
    </div>
</body>

<script>
    document.getElementById("predict-button-id").addEventListener("click", function() {
        
        let loader = document.getElementById('loader-id');
        let articleTitle = document.getElementById("article-title");
        let articleText = document.getElementById("article-text");
        let resultBanner = document.getElementById("result-banner");

        // start spinner and remove old prediction
        loader.style.display = 'inline';
        resultBanner.textContent = '';

        let prediction = getPrediction(articleTitle.value, articleTitle.value);
        prediction.then(function (response) {
            if (response === "real") {
                articleTitle.style.border = "3px solid green";
                articleText.style.border = "3px solid green";
                resultBanner.style.color = "green";
                resultBanner.textContent = "Real news!";
            } else {
                articleTitle.style.border = "3px solid red";
                articleText.style.border = "3px solid red";
                resultBanner.style.color = "red";
                resultBanner.textContent = "Fake news!"
            }}, function (error) {
                console.error("Prediction API call failed with error: " + error);
            });
        loader.style.display = 'none';
}, false);
</script>
</html>